From dcf6f17012d95c70df50446222e43772dac4dc52 Mon Sep 17 00:00:00 2001
From: Fayaaz Ahmed <fayaaz@users.noreply.github.com>
Date: Mon, 23 Apr 2018 23:31:47 +0100
Subject: [PATCH 1/2] Fix Traktor S4 MK2 for windows

---
 res/controllers/Traktor-Kontrol-S4-MK2-hid-scripts.js | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/res/controllers/Traktor-Kontrol-S4-MK2-hid-scripts.js b/res/controllers/Traktor-Kontrol-S4-MK2-hid-scripts.js
index f4689659f9..de05f5eeee 100644
--- a/res/controllers/Traktor-Kontrol-S4-MK2-hid-scripts.js
+++ b/res/controllers/Traktor-Kontrol-S4-MK2-hid-scripts.js
@@ -790,7 +790,11 @@ TraktorS4MK2.incomingData = function(data, length) {
     this.partial_packet = Object();
     return;
   }
-
+  if (length == 79) {
+	// Windows seems to get the packet of length 79, so parse as one:
+	  TraktorS4MK2.controller.parsePacket(data, data.length);
+    return;
+  }
   HIDDebug("Traktor S4MK2: Unhandled packet size: " + length);
 }
 

From e4161f90f37ad1bb2c5f23fa388c198c2bef733e Mon Sep 17 00:00:00 2001
From: Fayaaz Ahmed <fayaaz@users.noreply.github.com>
Date: Mon, 23 Apr 2018 23:34:59 +0100
Subject: [PATCH 2/2] Update Traktor-Kontrol-S4-MK2-hid-scripts.js

---
 res/controllers/Traktor-Kontrol-S4-MK2-hid-scripts.js | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/res/controllers/Traktor-Kontrol-S4-MK2-hid-scripts.js b/res/controllers/Traktor-Kontrol-S4-MK2-hid-scripts.js
index de05f5eeee..8cd0b85406 100644
--- a/res/controllers/Traktor-Kontrol-S4-MK2-hid-scripts.js
+++ b/res/controllers/Traktor-Kontrol-S4-MK2-hid-scripts.js
@@ -791,8 +791,8 @@ TraktorS4MK2.incomingData = function(data, length) {
     return;
   }
   if (length == 79) {
-	// Windows seems to get the packet of length 79, so parse as one:
-	  TraktorS4MK2.controller.parsePacket(data, data.length);
+    // Windows seems to get the packet of length 79, so parse as one:
+    TraktorS4MK2.controller.parsePacket(data, data.length);
     return;
   }
   HIDDebug("Traktor S4MK2: Unhandled packet size: " + length);
